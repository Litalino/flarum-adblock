{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@litalino/flarum-adblock/webpack/bootstrap","webpack://@litalino/flarum-adblock/webpack/runtime/compat get default export","webpack://@litalino/flarum-adblock/webpack/runtime/define property getters","webpack://@litalino/flarum-adblock/webpack/runtime/hasOwnProperty shorthand","webpack://@litalino/flarum-adblock/webpack/runtime/make namespace object","webpack://@litalino/flarum-adblock/external root \"flarum.core.compat['extend']\"","webpack://@litalino/flarum-adblock/external root \"flarum.core.compat['app']\"","webpack://@litalino/flarum-adblock/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@litalino/flarum-adblock/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@litalino/flarum-adblock/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","/*\n * This file is part of litalino/adblock.\n *\n * Copyright (c) 2023 Khatvongsong.\n * https://khatvongsong.vn\n *\n * For the full copyright and license information, please view the LICENSE.md\n * file that was distributed with this source code.\n */\n\nimport { extend } from 'flarum/extend';\nimport app from 'flarum/app';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Alert from \"flarum/common/components/Alert\";\n\napp.initializers.add('litalino/flarum-adblock', () => {\n\n    extend(IndexPage.prototype, 'oninit', function () {\n\n        var XF = window.XF || {};\n        XF.samViewCountMethod = \"impression\";\n        XF.samServerTime = Math.floor(Date.now() / 1000);\n        XF.samItem = \".samItem\";\n        XF.samCodeUnit = \".samCodeUnit\";\n        XF.samBannerUnit = \".samBannerUnit\";\n\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            //window.onload = function () {\n\n            /////////////////////\n            const img = app.forum.attribute('baseUrl') + '/assets/extensions/litalino-adblock/banner.png';\n            const url = app.forum.attribute('baseUrl');\n            const alt = 'Ads';\n\n            const adBlock_div = app.forum.attribute('litalino-adblock.adblock-div') ? app.forum.attribute('litalino-adblock.adblock-div') : '#content' ;\n            const adBlock_url = app.forum.attribute('litalino-adblock.adblock-url') ? app.forum.attribute('litalino-adblock.adblock-url') : url ;\n            const adBlock_img = app.forum.attribute('litalino-adblock.adblock-img') ? app.forum.attribute('litalino-adblock.adblock-img') : img ;\n            const adBlock_alt = app.forum.attribute('litalino-adblock.adblock-alt') ? app.forum.attribute('litalino-adblock.adblock-alt') : alt ;\n\n            //console.log( adBlock_div );\n            //var my_div = document.getElementById(''+ adBlock_div +'');\n            var my_div = document.querySelector(\"\" + adBlock_div + \"\");\n            //var my_div = document.getElementsByClassName(''+ adBlock_div +'');\n            //console.log( my_div );\n            if (my_div) {\n\n                var tag_div = document.createElement('div');\n                tag_div.innerHTML = '<div class=\"samItem\"> <a href=\"'+ adBlock_url +'\" target=\"_blank\" rel=\"nofollow\"> <img src=\"'+ adBlock_img +'\" title=\"'+ adBlock_alt +'\" alt=\"'+ adBlock_alt +'\"> </a> </div>';\n                tag_div.className = 'samBannerUnit samAlignCenter';\n\n                //my_div.parentNode.insertBefore(tag_div, my_div);\n                $( tag_div ).insertBefore( my_div );\n\n            }\n\n            /////////////////////\n            var text_notice = 'notice';\n            var text_supportUsTitle = 'Please support us';\n            var text_supportUsMessage = 'Please support us by disabling AdBlocker on our website.';\n            var text_url = '';\n            var text_element = \"#content\";\n            var text_method = \"alert\";\n            var text_content_sup = 'Press × to turn off notifications and show content.';\n            var text_content =\n              \"Hi. Can you please help us?\\n\\nI know the ads sometimes are too annoying and you want to use Adblock. But please support us by adding KhatVongSong to the whitelist. It will help us keep KhatVongSong free to use.\\n\\nThanks for your help!\";\n\n            var adBlock_notice_content_sup = app.forum.attribute('litalino-adblock.adblock-notice-content-sup') ? ' <sup><i>('+ app.forum.attribute('litalino-adblock.adblock-notice-content-sup') +')</i></sup>' : ' <sup><i>('+ text_content_sup +')</i></sup>';\n\n            const adBlock_action = app.forum.attribute('litalino-adblock.adblock-action') ? app.forum.attribute('litalino-adblock.adblock-action') : text_notice ;\n            const adBlock_supportUsTitle = app.forum.attribute('litalino-adblock.adblock-supportUsTitle') ? app.forum.attribute('litalino-adblock.adblock-supportUsTitle') : text_supportUsTitle ;\n            const adBlock_supportUsMessage = app.forum.attribute('litalino-adblock.adblock-supportUsMessage') ? app.forum.attribute('litalino-adblock.adblock-supportUsMessage') :text_supportUsMessage ;\n            const adBlock_supportRedirectUrl = app.forum.attribute('litalino-adblock.adblock-supportRedirectUrl') ? app.forum.attribute('litalino-adblock.adblock-supportRedirectUrl') : text_url ;\n            const adBlock_notice_element = app.forum.attribute('litalino-adblock.adblock-notice-element') ? app.forum.attribute('litalino-adblock.adblock-notice-element') : text_element ;\n            const adBlock_notice_method = app.forum.attribute('litalino-adblock.adblock-notice-method') ? app.forum.attribute('litalino-adblock.adblock-notice-method') : text_method ;\n            const adBlock_notice_content = app.forum.attribute('litalino-adblock.adblock-notice-content') ? app.forum.attribute('litalino-adblock.adblock-notice-content') + adBlock_notice_content_sup : text_content + adBlock_notice_content_sup ;\n            //const adBlock_notice_method = app.forum.attribute('litalino-adblock.adblock-notice-method') ? app.forum.attribute('litalino-adblock.adblock-notice-method') : 'prepend' ;\n            //const adBlock_notice_interval = app.forum.attribute('litalino-adblock.adblock-notice-interval') ? app.forum.attribute('litalino-adblock.adblock-notice-interval') : '1440' ;\n\n            var adBlockAction = adBlock_action; //\"notice\";\n            var supportUsTitle = adBlock_supportUsTitle; //\"Please support us\";\n            var supportUsMessage = adBlock_supportUsMessage; //\"Please support us by disabling AdBlocker on our website.\";\n            var supportRedirectUrl = adBlock_supportRedirectUrl; //\"\";\n            var adBlockNotice = {\n                element: adBlock_notice_element, //'#content',\n                method: adBlock_notice_method,\n                content: adBlock_notice_content, //\"Hi. Can you please help us?\\n\\nI know the ads sometimes are too annoying and you want to use Adblock. But please support us by adding KhatVongSong to the whitelist. It will help us keep KhatVongSong free to use.\\n\\nThanks for your help! <sup><i>(Press × to turn off notifications and show content.)</i></sup>\",\n                interval: 1440,\n                views: 1\n            };\n            function hasContentHeight(ad) {\n                if (ad.find('[data-xf-init=\"sam-lazy\"]').length) {\n                    return true;\n                }\n                var adminActions = ad.find('.samAdminActions');\n                //console.log( adminActions );\n                var ignoreContent = ad.find('.samIgnoreContent');\n                //console.log( ignoreContent );\n                var adsenseUnit = ad.find('ins.adsbygoogle');\n                //console.log( adsenseUnit );\n                var googleTagUnit = ad.find('[id^=\"div-gpt-ad\"]');\n                //console.log( googleTagUnit );\n                var ignoredHeight = 0;\n                if (adminActions.length) {\n                    ignoredHeight += adminActions.height();\n                }\n                if (ignoreContent.length) {\n                    ignoredHeight += ignoreContent.height();\n                }\n                if (adsenseUnit.length) {\n                    if (adsenseUnit[0].attributes['data-adsbygoogle-status'] === undefined) {\n                        return false;\n                    } else if (adsenseUnit.is(':hidden')) {\n                        return true;\n                    }\n                } else if (googleTagUnit.length) {\n                    if (googleTagUnit.css('min-height') == '1px') {\n                        return false;\n                    }\n                }\n                //console.log( ad.height());\n                //console.log( ignoredHeight);\n                return (ad.height() - ignoredHeight) > 0;\n            }\n            function initDetection() {\n                XF.samCoreLoaded = true;\n                $('<div class=\"banner_728x90 ad-banner\" />').appendTo('body');\n                var adUnits = $(XF.samCodeUnit + ' ' + XF.samItem + ':not(.samLazyLoading)' + ',' + XF.samBannerUnit + ' ' + XF.samItem + ':not(.samLazyLoading)');\n                //var adUnits = $(XF.samBannerUnit);\n                //var adUnits = $('.samBannerUnit');\n                //console.log('adUnits: '+ adUnits.length);\n                //console.log('adUnits: '+ adUnits.length);\n                //if (adUnits.length && ($('.banner_728x90.ad-banner').is(':hidden') || XF.samCoreLoaded === undefined)) {\n                if (adUnits.length && $('.banner_728x90.ad-banner').is(':hidden')) {\n                //console.log('adBlockAction: '+ adBlockAction );\n                    if (adBlockAction == 'backup' || adBlockAction == 'message') {\n                        adUnits.each(function() {\n                            if (!hasContentHeight($(this)) && $(this).find('> a img[data-src]').length == 0) {\n                                if (adBlockAction == 'backup') {\n                                    var backup = $(this).find('.samBackup');\n                                    if (backup.length) {\n                                        backup.find('img').each(function() {\n                                            $(this).attr('src', $(this).data('src'));\n                                        });\n                                        backup.fadeIn();\n                                    }\n                                } else {\n                                    $('<div class=\"samSupportUs\" />').html(supportUsMessage).prependTo($(this));\n                                }\n                            }\n                        });\n                    } else {\n                        var adsBlocked = 0;\n                        //console.log('hasContentHeight: '+ hasContentHeight($(this)));\n                        adUnits.each(function() {\n                            if (!hasContentHeight($(this))) {\n                                adsBlocked += 1;\n                            };\n                        });\n\n                        //console.log('adsBlocked : '+ adsBlocked );\n                        var canDisplayNotice = true;\n                        var pageViewCount = 2;\n                        //console.log('adBlockNotice.views: '+ adBlockNotice.views );\n                        if (adBlockNotice.views && adBlockNotice.views > pageViewCount) {\n                            canDisplayNotice = false;\n                        }\n                        //console.log('adsBlocked : '+ adsBlocked );\n                        //console.log(canDisplayNotice);\n\n                        if (! adsBlocked && canDisplayNotice) {\n                            if (adBlockAction == 'notice') {\n                                //console.log( 'adBlockNotice.interval :  '+adBlockNotice.interval    );\n                                //var dismissCookieTime = adBlockNotice.interval ? XF.Cookie.get('sam_notice_dismiss') : false;\n                                var dismissCookieTime = adBlockNotice.interval ? read_adblock_Cookie('adblock_sam_notice_dismiss') : false;\n                                //console.log( 'dismissCookieTime:  '+dismissCookieTime   );\n                                //console.log( 'adBlockNotice.interval * 60:  '+ (adBlockNotice.interval * 60)  );\n                                if (dismissCookieTime && (Math.floor(Date.now() / 1000) - dismissCookieTime <= (adBlockNotice.interval * 60)))\n\n                                //console.log( 'adBlockNotice.interval: '+ adBlockNotice.interval  );\n                                //console.log( 'Math.floor(Date.now() / 1000): ' + Math.floor(Date.now() / 1000) );\n                                //var dismissCookieTime = adBlockNotice.interval ? readCookie('sam_notice_dismiss') : false;\n                                //console.log( 'dismissCookieTime:  '+dismissCookieTime   );\n                                //console.log( 'adBlockNotice.interval * 60:  '+ (adBlockNotice.interval * 60)  );\n                                //console.log( 'Math.floor(Date.now() / 1000) - dismissCookieTime: '+ (Math.floor(Date.now() / 1000) - dismissCookieTime_ ) );\n                                //console.log( Math.floor(Date.now() / 1000) - dismissCookieTime <= (adBlockNotice.interval * 60));\n                                //if (dismissCookieTime)\n\n                                {\n                                    return;\n                                }\n                                var content = supportUsMessage;\n                                //console.log(content );\n                                //console.log(adBlockNotice.content);\n                                if (adBlockNotice.content) {\n                                    content = adBlockNotice.content;\n                                }\n                                var notice = $('<div id=\"samNotice\" />');\n                                notice.prepend('<a role=\"button\" id=\"samDismiss\">×</a>');\n                                notice.append('<span>' + content + '</span>');\n                                //console.log(adBlockNotice.method );\n                                if (adBlockNotice.method == 'prepend') {\n                                    notice.prependTo(adBlockNotice.element);\n\n                                } else if (adBlockNotice.method == 'append') {\n                                    notice.appendTo(adBlockNotice.element);\n\n                                } else {\n                                    //console.log(notice);\n                                    //notice.prependTo(adBlockNotice.element);\n                                    //console.log(notice[0].outerHTML);\n                                    //const c1_text = notice[0].innerHTML.replace(/>/g, \"&gt;\");\n                                    //const c2_text = c1_text.replace(/</g, \"&lt;\");\n                                    const notice_text = notice[0].outerText;\n                                    app.alerts.show(Alert, { type: 'error' }, notice_text);\n                                }\n                                notice.fadeIn('slow');\n                                //XF.activate(notice);\n                                $('body').addClass('samAdBlockDetected');\n\n                            } else {\n                                var pUrl = window.location.href;\n                                var rUrl = supportRedirectUrl;\n                                if (rUrl && pUrl.indexOf(rUrl) === -1) {\n                                    window.location.href = rUrl;\n                                    return;\n                                }\n                                var $overlay = XF.getOverlayHtml({\n                                    title: supportUsTitle,\n                                    dismissible: false,\n                                    html: '<div class=\"blockMessage\">' + supportUsMessage + '</div>'\n                                });\n                                var overlay = new XF.Overlay($overlay, {\n                                    backdropClose: false,\n                                    keyboard: false,\n                                    escapeClose: false,\n                                    className: 'samSupportUsOverlay'\n                                });\n                                overlay.show();\n                                $('head').append('<style>::-webkit-scrollbar{display: none;}</style>');\n                                $('.samSupportUsOverlay').css('background-color', 'black').fadeTo('slow', 0.95);\n\n                            }\n                        }\n                    }\n                }\n            }\n            \n            $(document).on('click', '.samAdBlockDetected #alerts .Alert-controls', function() {\n                //$(this).parent('#samNotice').fadeOut();\n                $('body').removeClass('samAdBlockDetected');\n                //XF.Cookie.set('sam_notice_dismiss', Math.floor(Date.now() / 1000));\n                var value = Math.floor(Date.now() / 1000);\n                //create_adblock_Cookie('adblock_sam_notice_dismiss', 'true', '30')\n                create_adblock_Cookie('adblock_sam_notice_dismiss', value, null)\n\n            });\n            $(document).on('click', '#samDismiss', function() {\n                $(this).parent('#samNotice').fadeOut();\n                $('body').removeClass('samAdBlockDetected');\n                //XF.Cookie.set('sam_notice_dismiss', Math.floor(Date.now() / 1000));\n                var value = Math.floor(Date.now() / 1000);\n                //create_adblock_Cookie('adblock_sam_notice_dismiss', 'true', '30')\n                create_adblock_Cookie('adblock_sam_notice_dismiss', value, null)\n\n            });\n            $(document).on('samInitDetection', function() {\n                initDetection();\n            });\n\n            $(document).trigger('samInitDetection');\n\n            function create_adblock_Cookie(name, value, days) {\n                if (days) {\n                    var date = new Date();\n                    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n                    var expires = \"; expires=\" + date.toGMTString();\n                } else {\n                    var expires = '';\n                }\n                //var expires = (expires != nul) ? \"; expires=\" + expires : \"\";\n                var path = (path != null) ? \"; path=\" + path : \"\";\n                //var domain = (domain != null) ? \"; domain=\" + domain : \"\";\n                //var secure = (secure != null) ? \"; secure\" : \"\";\n                var secure = \"; secure\";\n\n                //document.cookie = name + \"=\" + escape(value) + expires + path + domain + secure;\n                document.cookie = name + \"=\" + escape(value) + expires + path + secure;\n            }\n\n            function read_adblock_Cookie(name) {\n                var nameEQ = name + \"=\";\n                var ca = document.cookie.split(\";\");\n                for (var i = 0; i < ca.length; i++) {\n                    var c = ca[i];\n                    while (c.charAt(0) === \" \") c = c.substring(1, c.length);\n                    if (c.indexOf(nameEQ) === 0)\n                    return c.substring(nameEQ.length, c.length);\n                }\n                return null;\n            }\n\n        });\n\n    });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","app","add","extend","IndexPage","XF","window","samViewCountMethod","samServerTime","Math","floor","Date","now","samItem","samCodeUnit","samBannerUnit","document","addEventListener","img","attribute","url","adBlock_div","adBlock_url","adBlock_img","adBlock_alt","my_div","querySelector","tag_div","createElement","innerHTML","className","$","insertBefore","adBlock_notice_content_sup","adBlock_action","adBlock_supportUsTitle","adBlock_supportUsMessage","adBlock_supportRedirectUrl","adBlock_notice_element","adBlock_notice_method","adBlock_notice_content","adBlockAction","supportUsTitle","supportUsMessage","supportRedirectUrl","adBlockNotice","element","method","content","interval","views","hasContentHeight","ad","find","length","adminActions","ignoreContent","adsenseUnit","googleTagUnit","ignoredHeight","height","undefined","attributes","is","css","create_adblock_Cookie","name","days","date","setTime","getTime","expires","toGMTString","path","cookie","escape","on","removeClass","this","parent","fadeOut","samCoreLoaded","appendTo","adUnits","each","backup","attr","data","fadeIn","html","prependTo","adsBlocked","canDisplayNotice","dismissCookieTime","nameEQ","ca","split","i","c","charAt","substring","indexOf","read_adblock_Cookie","notice","prepend","append","notice_text","outerText","show","Alert","type","addClass","pUrl","location","href","rUrl","$overlay","getOverlayHtml","title","dismissible","Overlay","backdropClose","keyboard","escapeClose","fadeTo","initDetection","trigger"],"sourceRoot":""}