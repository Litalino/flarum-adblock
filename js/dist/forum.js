(()=>{var t={n:e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},d:(e,a)=>{for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const a=flarum.core.compat.extend,o=flarum.core.compat.app;var n=t.n(o);const i=flarum.core.compat["forum/components/IndexPage"];var l=t.n(i);n().initializers.add("litalino/flarum-adblock",(function(){(0,a.extend)(l().prototype,"oninit",(function(){var t=window.XF||{};t.samViewCountMethod="impression",t.samServerTime=Math.floor(Date.now()/1e3),t.samItem=".samItem",t.samCodeUnit=".samCodeUnit",t.samBannerUnit=".samBannerUnit",document.addEventListener("DOMContentLoaded",(function(){var e=n().forum.attribute("baseUrl")+"/assets/extensions/litalino-adblock/banner.png",a=n().forum.attribute("baseUrl"),o=n().forum.attribute("litalino-adblock.adblock-div")?n().forum.attribute("litalino-adblock.adblock-div"):"content",i=n().forum.attribute("litalino-adblock.adblock-url")?n().forum.attribute("litalino-adblock.adblock-url"):a,l=n().forum.attribute("litalino-adblock.adblock-img")?n().forum.attribute("litalino-adblock.adblock-img"):e,r=n().forum.attribute("litalino-adblock.adblock-alt")?n().forum.attribute("litalino-adblock.adblock-alt"):"Ads",s=document.getElementById(""+o);if(s){var d=document.createElement("div");d.innerHTML='<div class="samItem"> <a href="'+i+'" target="_blank" rel="nofollow"> <img src="'+l+'" title="'+r+'" alt="'+r+'"> </a> </div>',d.className="samBannerUnit samAlignCenter",s.parentNode.insertBefore(d,s)}var c=n().forum.attribute("litalino-adblock.adblock-notice-content-sup")?" <sup><i>("+n().forum.attribute("litalino-adblock.adblock-notice-content-sup")+")</i></sup>":" <sup><i>(Press × to turn off notifications and show content.)</i></sup>",u=n().forum.attribute("litalino-adblock.adblock-action")?n().forum.attribute("litalino-adblock.adblock-action"):"notice",m=n().forum.attribute("litalino-adblock.adblock-supportUsTitle")?n().forum.attribute("litalino-adblock.adblock-supportUsTitle"):"Please support us",b=n().forum.attribute("litalino-adblock.adblock-supportUsMessage")?n().forum.attribute("litalino-adblock.adblock-supportUsMessage"):"Please support us by disabling AdBlocker on our website.",f=n().forum.attribute("litalino-adblock.adblock-supportRedirectUrl")?n().forum.attribute("litalino-adblock.adblock-supportRedirectUrl"):"",p=n().forum.attribute("litalino-adblock.adblock-notice-element")?n().forum.attribute("litalino-adblock.adblock-notice-element"):"#content",k=n().forum.attribute("litalino-adblock.adblock-notice-content")?n().forum.attribute("litalino-adblock.adblock-notice-content")+c:"Hi. Can you please help us?\n\nI know the ads sometimes are too annoying and you want to use Adblock. But please support us by adding KhatVongSong to the whitelist. It will help us keep KhatVongSong free to use.\n\nThanks for your help!"+c,h=u,g=m,v=b,y=f,w={element:p,method:"prepend",content:k,interval:1440,views:1};function U(t){if(t.find('[data-xf-init="sam-lazy"]').length)return!0;var e=t.find(".samAdminActions"),a=t.find(".samIgnoreContent"),o=t.find("ins.adsbygoogle"),n=t.find('[id^="div-gpt-ad"]'),i=0;if(e.length&&(i+=e.height()),a.length&&(i+=a.height()),o.length){if(void 0===o[0].attributes["data-adsbygoogle-status"])return!1;if(o.is(":hidden"))return!0}else if(n.length&&"1px"==n.css("min-height"))return!1;return t.height()-i>0}$(document).on("click","#samDismiss",(function(){var t,e;$(this).parent("#samNotice").fadeOut(),$("body").removeClass("samAdBlockDetected"),t=Math.floor(Date.now()/1e3),e="",document.cookie="adblok_sam_notice_dismiss="+t+"; "+e+"; sameSite=Session; Secure",path="/"})),$(document).on("samInitDetection",(function(){!function(){t.samCoreLoaded=!0,$('<div class="banner_728x90 ad-banner" />').appendTo("body");var e=$(t.samCodeUnit+" "+t.samItem+":not(.samLazyLoading),"+t.samBannerUnit+" "+t.samItem+":not(.samLazyLoading)");if(e.length&&$(".banner_728x90.ad-banner").is(":hidden"))if("backup"==h||"message"==h)e.each((function(){if(!U($(this))&&0==$(this).find("> a img[data-src]").length)if("backup"==h){var t=$(this).find(".samBackup");t.length&&(t.find("img").each((function(){$(this).attr("src",$(this).data("src"))})),t.fadeIn())}else $('<div class="samSupportUs" />').html(v).prependTo($(this))}));else{var a=0;e.each((function(){U($(this))||(a+=1)}));var o=!0;if(w.views&&w.views>2&&(o=!1),!a&&o)if("notice"==h){var n=!!w.interval&&function(t){for(var e="adblok_sam_notice_dismiss=",a=document.cookie.split(";"),o=0;o<a.length;o++){for(var n=a[o];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return n.substring(26,n.length)}return null}();if(n&&Math.floor(Date.now()/1e3)-n<=60*w.interval)return;var i=v;w.content&&(i=w.content);var l=$('<div id="samNotice" />');l.prepend('<a role="button" id="samDismiss">×</a>'),l.append("<span>"+i+"</span>"),"prepend"==w.method?l.prependTo(w.element):l.appendTo(w.element),l.fadeIn("slow"),$("body").addClass("samAdBlockDetected")}else{var r=window.location.href,s=y;if(s&&-1===r.indexOf(s))return void(window.location.href=s);var d=t.getOverlayHtml({title:g,dismissible:!1,html:'<div class="blockMessage">'+v+"</div>"});new t.Overlay(d,{backdropClose:!1,keyboard:!1,escapeClose:!1,className:"samSupportUsOverlay"}).show(),$("head").append("<style>::-webkit-scrollbar{display: none;}</style>"),$(".samSupportUsOverlay").css("background-color","black").fadeTo("slow",.95)}}}()})),$(document).trigger("samInitDetection")}))}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map