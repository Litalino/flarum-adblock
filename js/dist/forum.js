(()=>{var t={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},d:(e,o)=>{for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const o=flarum.core.compat.extend,a=flarum.core.compat.app;var n=t.n(a);const i=flarum.core.compat["forum/components/IndexPage"];var l=t.n(i);const r=flarum.core.compat["common/components/Alert"];var s=t.n(r);n().initializers.add("litalino/flarum-adblock",(function(){(0,o.extend)(l().prototype,"oninit",(function(){var t=window.XF||{};t.samViewCountMethod="impression",t.samServerTime=Math.floor(Date.now()/1e3),t.samItem=".samItem",t.samCodeUnit=".samCodeUnit",t.samBannerUnit=".samBannerUnit",document.addEventListener("DOMContentLoaded",(function(){var e=n().forum.attribute("baseUrl")+"/assets/extensions/litalino-adblock/banner.png",o=n().forum.attribute("baseUrl"),a=n().forum.attribute("litalino-adblock.adblock-div")?n().forum.attribute("litalino-adblock.adblock-div"):"#content",i=n().forum.attribute("litalino-adblock.adblock-url")?n().forum.attribute("litalino-adblock.adblock-url"):o,l=n().forum.attribute("litalino-adblock.adblock-img")?n().forum.attribute("litalino-adblock.adblock-img"):e,r=n().forum.attribute("litalino-adblock.adblock-alt")?n().forum.attribute("litalino-adblock.adblock-alt"):"Ads",d=document.querySelector(""+a);if(d){var c=document.createElement("div");c.innerHTML='<div class="samItem"> <a href="'+i+'" target="_blank" rel="nofollow"> <img src="'+l+'" title="'+r+'" alt="'+r+'"> </a> </div>',c.className="samBannerUnit samAlignCenter",$(c).insertBefore(d)}var u=n().translator.trans("adblock.forum.adblock-notice-content"),m=n().translator.trans("adblock.forum.adblock-notice-content-sup"),b=n().forum.attribute("litalino-adblock.adblock-notice-content-sup")?" <sup><i>("+n().forum.attribute("litalino-adblock.adblock-notice-content-sup")+")</i></sup>":" <sup><i>("+m+")</i></sup>",f=n().forum.attribute("litalino-adblock.adblock-action")?n().forum.attribute("litalino-adblock.adblock-action"):"notice",p=n().forum.attribute("litalino-adblock.adblock-supportUsTitle")?n().forum.attribute("litalino-adblock.adblock-supportUsTitle"):"Please support us",k=n().forum.attribute("litalino-adblock.adblock-supportUsMessage")?n().forum.attribute("litalino-adblock.adblock-supportUsMessage"):"Please support us by disabling AdBlocker on our website.",v=n().forum.attribute("litalino-adblock.adblock-supportRedirectUrl")?n().forum.attribute("litalino-adblock.adblock-supportRedirectUrl"):"",h=n().forum.attribute("litalino-adblock.adblock-notice-element")?n().forum.attribute("litalino-adblock.adblock-notice-element"):"#content",g=n().forum.attribute("litalino-adblock.adblock-notice-method")?n().forum.attribute("litalino-adblock.adblock-notice-method"):"alert",y=n().forum.attribute("litalino-adblock.adblock-notice-content")?n().forum.attribute("litalino-adblock.adblock-notice-content")+b:u+b,w=f,U=p,_=k,T=v,D={element:h,method:g,content:y,interval:1440,views:1};function M(t){if(t.find('[data-xf-init="sam-lazy"]').length)return!0;var e=t.find(".samAdminActions"),o=t.find(".samIgnoreContent"),a=t.find("ins.adsbygoogle"),n=t.find('[id^="div-gpt-ad"]'),i=0;if(e.length&&(i+=e.height()),o.length&&(i+=o.height()),a.length){if(void 0===a[0].attributes["data-adsbygoogle-status"])return!1;if(a.is(":hidden"))return!0}else if(n.length&&"1px"==n.css("min-height"))return!1;return t.height()-i>0}function x(t,e,o){if(o){var a=new Date;a.setTime(a.getTime()+24*o*60*60*1e3);var n="; expires="+a.toGMTString()}else n="";var i=null!=i?"; path="+i:"";document.cookie=t+"="+escape(e)+n+i+"; secure"}$(document).on("click",".samAdBlockDetected #alerts .Alert-controls",(function(){$("body").removeClass("samAdBlockDetected"),x("adblock_sam_notice_dismiss",Math.floor(Date.now()/1e3),null)})),$(document).on("click","#samDismiss",(function(){$(this).parent("#samNotice").fadeOut(),$("body").removeClass("samAdBlockDetected"),x("adblock_sam_notice_dismiss",Math.floor(Date.now()/1e3),null)})),$(document).on("samInitDetection",(function(){!function(){t.samCoreLoaded=!0,$('<div class="banner_728x90 ad-banner" />').appendTo("body");var e=$(t.samCodeUnit+" "+t.samItem+":not(.samLazyLoading),"+t.samBannerUnit+" "+t.samItem+":not(.samLazyLoading)");if(e.length&&$(".banner_728x90.ad-banner").is(":hidden"))if("backup"==w||"message"==w)e.each((function(){if(!M($(this))&&0==$(this).find("> a img[data-src]").length)if("backup"==w){var t=$(this).find(".samBackup");t.length&&(t.find("img").each((function(){$(this).attr("src",$(this).data("src"))})),t.fadeIn())}else $('<div class="samSupportUs" />').html(_).prependTo($(this))}));else{var o=0;e.each((function(){M($(this))||(o+=1)}));var a=!0;if(D.views&&D.views>2&&(a=!1),!o&&a)if("notice"==w){var i=!!D.interval&&function(t){for(var e="adblock_sam_notice_dismiss=",o=document.cookie.split(";"),a=0;a<o.length;a++){for(var n=o[a];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return n.substring(27,n.length)}return null}();if(i&&Math.floor(Date.now()/1e3)-i<=60*D.interval)return;var l=_;D.content&&(l=D.content);var r=$('<div id="samNotice" />');if(r.prepend('<a role="button" id="samDismiss">Ã—</a>'),r.append("<span>"+l+"</span>"),"prepend"==D.method)r.prependTo(D.element);else if("append"==D.method)r.appendTo(D.element);else{var d=r[0].outerText;n().alerts.show(s(),{type:"error"},d)}r.fadeIn("slow"),$("body").addClass("samAdBlockDetected")}else{var c=window.location.href,u=T;if(u&&-1===c.indexOf(u))return void(window.location.href=u);var m=t.getOverlayHtml({title:U,dismissible:!1,html:'<div class="blockMessage">'+_+"</div>"});new t.Overlay(m,{backdropClose:!1,keyboard:!1,escapeClose:!1,className:"samSupportUsOverlay"}).show(),$("head").append("<style>::-webkit-scrollbar{display: none;}</style>"),$(".samSupportUsOverlay").css("background-color","black").fadeTo("slow",.95)}}}()})),$(document).trigger("samInitDetection")}))}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map