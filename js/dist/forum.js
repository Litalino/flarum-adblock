(()=>{var t={n:e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},d:(e,a)=>{for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const a=flarum.core.compat.extend,o=flarum.core.compat.app;var n=t.n(o);const i=flarum.core.compat["forum/components/IndexPage"];var l=t.n(i);n().initializers.add("litalino/flarum-adblock",(function(){(0,a.extend)(l().prototype,"oninit",(function(){var t=window.XF||{};t.samViewCountMethod="impression",t.samServerTime=Math.floor(Date.now()/1e3),t.samItem=".samItem",t.samCodeUnit=".samCodeUnit",t.samBannerUnit=".samBannerUnit",document.addEventListener("DOMContentLoaded",(function(){var e=n().forum.attribute("baseUrl")+"/assets/extensions/litalino-adblock/banner.png",a=n().forum.attribute("baseUrl"),o=n().translator.trans("adblock.admin.adblock-alt"),i=n().forum.attribute("litalino-adblock.adblock-div")?n().forum.attribute("litalino-adblock.adblock-div"):"content",l=n().forum.attribute("litalino-adblock.adblock-url")?n().forum.attribute("litalino-adblock.adblock-url"):a,r=n().forum.attribute("litalino-adblock.adblock-img")?n().forum.attribute("litalino-adblock.adblock-img"):e,s=n().forum.attribute("litalino-adblock.adblock-img")?n().forum.attribute("litalino-adblock.adblock-alt"):o,d=document.getElementById(""+i);if(d){var c=document.createElement("div");c.innerHTML='<div class="samItem"> <a href="'+l+'" target="_blank" rel="nofollow"> <img src="'+r+'" title="'+s+'" alt="'+s+'"> </a> </div>',c.className="samBannerUnit samAlignCenter",d.parentNode.insertBefore(c,d)}var u=n().forum.attribute("litalino-adblock.adblock-notice-content-sup")?" <sup><i>("+n().forum.attribute("litalino-adblock.adblock-notice-content-sup")+")</i></sup>":" <sup><i>(Press × to turn off notifications and show content.)</i></sup>",m=n().forum.attribute("litalino-adblock.adblock-action")?n().forum.attribute("litalino-adblock.adblock-action"):"notice",b=n().forum.attribute("litalino-adblock.adblock-supportUsTitle")?n().forum.attribute("litalino-adblock.adblock-supportUsTitle"):"Please support us",f=n().forum.attribute("litalino-adblock.adblock-supportUsMessage")?n().forum.attribute("litalino-adblock.adblock-supportUsMessage"):"Please support us by disabling AdBlocker on our website.",p=n().forum.attribute("litalino-adblock.adblock-supportRedirectUrl")?n().forum.attribute("litalino-adblock.adblock-supportRedirectUrl"):"",k=n().forum.attribute("litalino-adblock.adblock-notice-element")?n().forum.attribute("litalino-adblock.adblock-notice-element"):"#content",h=n().forum.attribute("litalino-adblock.adblock-notice-content")?n().forum.attribute("litalino-adblock.adblock-notice-content")+u:"Hi. Can you please help us?\n\nI know the ads sometimes are too annoying and you want to use Adblock. But please support us by adding KhatVongSong to the whitelist. It will help us keep KhatVongSong free to use.\n\nThanks for your help!"+u,g=m,v=b,y=f,w=p,U={element:k,method:"prepend",content:h,interval:1440,views:1};function I(t){if(t.find('[data-xf-init="sam-lazy"]').length)return!0;var e=t.find(".samAdminActions"),a=t.find(".samIgnoreContent"),o=t.find("ins.adsbygoogle"),n=t.find('[id^="div-gpt-ad"]'),i=0;if(e.length&&(i+=e.height()),a.length&&(i+=a.height()),o.length){if(void 0===o[0].attributes["data-adsbygoogle-status"])return!1;if(o.is(":hidden"))return!0}else if(n.length&&"1px"==n.css("min-height"))return!1;return t.height()-i>0}$(document).on("click","#samDismiss",(function(){var t,e;$(this).parent("#samNotice").fadeOut(),$("body").removeClass("samAdBlockDetected"),t=Math.floor(Date.now()/1e3),e="",document.cookie="adblok_sam_notice_dismiss="+t+"; "+e+"; sameSite=Session; Secure",path="/"})),$(document).on("samInitDetection",(function(){!function(){t.samCoreLoaded=!0,$('<div class="banner_728x90 ad-banner" />').appendTo("body");var e=$(t.samCodeUnit+" "+t.samItem+":not(.samLazyLoading),"+t.samBannerUnit+" "+t.samItem+":not(.samLazyLoading)");if(e.length&&$(".banner_728x90.ad-banner").is(":hidden"))if("backup"==g||"message"==g)e.each((function(){if(!I($(this))&&0==$(this).find("> a img[data-src]").length)if("backup"==g){var t=$(this).find(".samBackup");t.length&&(t.find("img").each((function(){$(this).attr("src",$(this).data("src"))})),t.fadeIn())}else $('<div class="samSupportUs" />').html(y).prependTo($(this))}));else{var a=0;e.each((function(){I($(this))||(a+=1)}));var o=!0;if(U.views&&U.views>2&&(o=!1),console.log("adsBlocked : "+a),!a&&o)if("notice"==g){var n=!!U.interval&&function(t){for(var e="adblok_sam_notice_dismiss=",a=document.cookie.split(";"),o=0;o<a.length;o++){for(var n=a[o];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return n.substring(26,n.length)}return null}();if(n&&Math.floor(Date.now()/1e3)-n<=60*U.interval)return;var i=y;U.content&&(i=U.content);var l=$('<div id="samNotice" />');l.prepend('<a role="button" id="samDismiss">×</a>'),l.append("<span>"+i+"</span>"),"prepend"==U.method?l.prependTo(U.element):l.appendTo(U.element),l.fadeIn("slow"),$("body").addClass("samAdBlockDetected")}else{var r=window.location.href,s=w;if(s&&-1===r.indexOf(s))return void(window.location.href=s);var d=t.getOverlayHtml({title:v,dismissible:!1,html:'<div class="blockMessage">'+y+"</div>"});new t.Overlay(d,{backdropClose:!1,keyboard:!1,escapeClose:!1,className:"samSupportUsOverlay"}).show(),$("head").append("<style>::-webkit-scrollbar{display: none;}</style>"),$(".samSupportUsOverlay").css("background-color","black").fadeTo("slow",.95)}}}()})),$(document).trigger("samInitDetection")}))}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map